$(document).ready(function(){$("a.CommentTextEdit").click(function(){var d=$("<textarea></textarea>");var c=$(this).closest(".CommentTextEditable");c.parent(".CommentText").removeClass("CommentTextOverflow");d.attr("name",c.attr("id"));$(this).remove();d.val(c.text());c.after(d);c.remove();return false});$(".CommentText").click(function(){$(this).find("a.CommentTextEdit").click();return false});$(".CommentItem").each(function(){var d=$(this);var e=d.find(".CommentItemInfo");var c=e.height()+30;var f=d.find(".CommentText");if(f.height()>c){f.addClass("CommentTextOverflow")}});$("#CommentLimitSelect").change(function(){window.location="./?limit="+parseInt($(this).val())});$("#CommentListSort").change(function(){window.location="./?sort="+$(this).val()});function b(d){var c=d.closest(".CommentItem");if(d.is(":checked")){c.addClass("CommentChecked")}else{c.removeClass("CommentChecked")}}$(".CommentCheckbox").click(function(){b($(this))});$("#CommentCheckAll").click(function(){var c=$(".CommentCheckbox");if($(this).is(":checked")){c.attr("checked","checked")}else{c.removeAttr("checked")}c.each(function(){b($(this))})});$("#CommentActions").change(function(){var d=$(this).val();if(!d.length){return}var c=$(".CommentChecked");if(c.length){c.each(function(){if(d=="reset-upvotes"){$(this).find(".CommentUpvotes > input").val(0).change()}else{if(d=="reset-downvotes"){$(this).find(".CommentDownvotes > input").val(0).change()}else{$(this).find(".CommentStatus > input[value='"+d+"']").click()}}});c.effect("highlight",500)}else{ProcessWire.alert($(this).attr("data-nochecked"))}$(this).val("")});$(document).on("change",".CommentItem :input",function(){var c=$(this);if(c.is("[type='checkbox']")){return}$(this).closest(".CommentItem").addClass("CommentItemChanged")});$("#CommentListForm").submit(function(){$(this).addClass("CommentListFormSubmitted")});window.addEventListener("beforeunload",function(d){if($(".CommentListFormSubmitted").length){return}var c=$(".CommentItemChanged");if(c.length==0){return}var f=$("#CommentListForm").attr("data-unsaved");(d||window.event).returnValue=f;return f});var a=$(".WireTabs a.on").css("border-top-color");$("#CommentListHeader").css("border-top-color",a)});
var pwPanels={qty:0,init:function(){var a=window.location.href;a.indexOf("pw_panel=1")>-1?$(document).on("mouseover","a",function(){var a=$(this),e=a.attr("target");void 0!==e&&0!=e.length||a.attr("target","_parent")}):a.indexOf("pw_panel=2")>-1||$(".pw-panel").each(function(){var a=$(this);pwPanels.addPanel(a)})},addPanel:function(a){var e=a.attr("data-href"),t=a.attr("data-panel-id"),n="pw-panel-container-"+ ++pwPanels.qty;if(void 0!==e&&e.length||(e=a.attr("href")),void 0!==e&&e.length){var s="";if(e.indexOf("#")>-1){var l=e.split("#");e=l[0],s="#"+l[1]}e+=(e.indexOf("?")>-1?"&":"?")+"modal=panel&pw_panel=",null!==a&&a.hasClass("pw-panel-links")?e+="2":e+="1",e+=s}var i=$("<i />").attr("class","pw-panel-icon fa fa-angle-double-left"),o=$("<small />").attr("class","ui-button-text").append(i),p=$("<a />").attr("class","pw-panel-button pw-panel-button-closed ui-button ui-state-default").attr("href",e).on("click",pwPanels.buttonClickEvent).on("mouseover",pwPanels.buttonMouseoverEvent).on("mouseout",pwPanels.buttonMouseoutEvent).append(o),r=$("<div />").attr("id",n).attr("class","pw-panel-container pw-panel-container-closed").append(p);$("body").append(r),void 0!==t&&t.length&&($("#"+t).hide().addClass("pw-panel-element"),r.addClass("pw-panel-container-element").attr("data-panel-id",t)),null!==a?pwPanels.initToggler(a,p,r):r.addClass("pw-panel-left")},initToggler:function(a,e,t){var n=a.hasClass("pw-panel-right")?"right":"left",s=a.attr("data-tab-text"),l=a.attr("data-tab-icon"),i=a.attr("data-tab-offset"),o=a.attr("data-panel-width"),p="right"==n?"left":"right",r=1;if(t.addClass("pw-panel-tab pw-panel-"+n),t.attr("data-href",e.attr("href")),a.hasClass("pw-panel-reload")&&t.addClass("pw-panel-reload"),void 0!==i&&((i=parseInt(i))>-1?e.css("top",i+"px"):(e.css("top","auto"),e.css("bottom",Math.abs(i)+"px"))),void 0!==s&&s.length){var d=e.children(".ui-button-text"),c=$("<span />").text(s);d.html("<span>"+c.text()+"</span>"),e.addClass("pw-panel-button-text"),r=7}if(void 0!==l&&l.length){var w=$("<i />").addClass("fa fa-fw fa-"+l);c=e.children(".ui-button-text");e.hasClass("pw-panel-button-text")?c.prepend(w):(c.empty().append(w),e.css(p,-1*e.outerWidth()+"px"))}void 0!==o&&o.length&&(t.css("width",o),t.css(n,"-"+o)),"right"==n||e.css("right",-1*(r+e.height())+"px"),a.hasClass("pw-panel-tab")||e.addClass("pw-panel-button-hidden"),a.click(function(){return e.click(),!1}).on("mouseover",function(){e.mouseover()}).on("mouseout",function(){e.mouseout()})},initPanelContent:function(a){var e=a.find(".pw-panel-content"),t=a.attr("data-panel-id");if(e.length)return e;if(void 0!==t){var n=$("#"+t);n.length&&(e=$("<div />").addClass("pw-panel-content").css("overflow","auto"),a.append(e),e.append(n),n.show(),n.trigger("pw-panel-init"))}else e=$("<iframe />").addClass("pw-panel-content").attr("src",a.attr("data-href")),a.append(e);return e},windowResizeEvent:function(){$(".pw-panel-container-init").each(function(){var a=$(this);if(!a.hasClass("pw-panel-container-open")){var e=-1*a.width()+"px";a.hasClass("pw-panel-right")?a.css("right",e):a.css("left",e)}})},buttonClickEvent:function(){var a=$(this),e=a.closest(".pw-panel-container"),t=(e.find(".pw-panel-content"),e.hasClass("pw-panel-container-open")),n=e.hasClass("pw-panel-container-loaded"),s=e.width(),l=e.hasClass("pw-panel-right")?"right":"left",i=void 0!==jQuery.ui;function o(){e.toggleClass("pw-panel-container-open pw-panel-container-closed"),a.toggleClass("pw-panel-button-open pw-panel-button-closed")}if(0==$(".pw-panel-container-init").length&&$(window).resize(pwPanels.windowResizeEvent),t){var p=-1*s+"px";i?"left"==l?e.animate({left:p},150,o):e.animate({right:p},150,o):(e.css(l,p),o()),$("body").css("overflow",""),$("#pw-panel-shade").fadeOut("fast",function(){$(this).remove()}),a.fadeOut("fast",function(){a.removeClass("ui-state-active"),a.fadeIn("fast")}),i&&"left"==l&&e.resizable("destroy"),e.hasClass("pw-panel-reload")&&e.find("iframe.pw-panel-content").remove(),$(document).trigger("pw-panel-closed",e)}else{!e.hasClass("pw-panel-reload")&&n||pwPanels.initPanelContent(e),i?"left"==l?e.animate({left:0},150,o):e.animate({right:0},150,o):(e.css(l,0),o());var r=$("<div id='pw-panel-shade'>&nbsp;</div>");e.before(r).fadeIn("fast"),$("body").css("overflow","hidden"),r.click(function(){var a=$(".pw-panel-container-open");if(!a.length)return!1;a.find(".pw-panel-button").click()}),i&&"left"==l&&e.resizable({handles:"e",start:function(a,t){var n=$("<div />").addClass("pw-panel-resizable-overlay").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1001,display:"hidden"});e.append(n)},stop:function(a,e){$(".pw-panel-resizable-overlay").remove()}}),e.addClass("pw-panel-container-init")}return!1},buttonMouseoverEvent:function(){var a=$(this),e=a.closest(".pw-panel-container");a.removeClass("ui-state-active").addClass("ui-state-hover"),e.hasClass("pw-panel-container-loaded")||(e.addClass("pw-panel-container-loaded"),e.hasClass("pw-panel-reload")||pwPanels.initPanelContent(e))},buttonMouseoutEvent:function(){var a=$(this);a.closest(".pw-panel-container").hasClass("pw-panel-container-open")&&a.addClass("ui-state-active")}};jQuery(document).ready(function(){pwPanels.init()});
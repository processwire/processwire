class e{constructor(e){this.object=e.object,this.args=e.arguments,this.replace=!1,this.return=e.return}get arguments(){const e=this;return new Proxy(function(){return 0===arguments.length?e.args:1===arguments.length?e.args[arguments[0]]:void(2===arguments.length&&(e.args[arguments[0]]=arguments[1]))},{get(r,t){if("length"===t)return e.args.length;const o=parseInt(t,10);return isNaN(o)?void 0:e.args[o]},set(r,t,o){const n=parseInt(t,10);return!isNaN(n)&&(e.args[n]=o,!0)}})}}"undefined"==typeof ProcessWire&&(ProcessWire={});const r=new class{hooks={after:{},before:{}};addHookAfter(e,r,t=100){const o=this.hooks.after[e]||[];o.push({name:e,fn:r,priority:t}),o.sort((e,r)=>e.priority-r.priority),this.hooks.after[e]=o}addHookBefore(e,r,t=100){const o=this.hooks.before[e]||[];o.push({name:e,fn:r,priority:t}),o.sort((e,r)=>e.priority-r.priority),this.hooks.before[e]=o}executeHooks(e,r,t){const o=this.hooks[e][r]||[];for(let n=0;n<o.length;n++)try{if(o[n].fn(t),t.replace&&"before"===e)break}catch(s){console.error(`Error in ${e} hook for ${r}:`,s),console.log("Hook:",o[n]),console.log("HookEvent:",t)}}hookHandler(){const r=this;return{get:function(t,o){const n=t.object;if("string"!=typeof o)return n[o];let s=t.name;s||(s=n.constructor.name);const i=`${s}::${o}`;return o.startsWith("___")||void 0===n[`___${o}`]?n[o]:function(...t){const s=new e({arguments:t,object:this});return r.executeHooks("before",i,s),s.replace||(s.return=n[`___${o}`].apply(this,s.arguments()),r.executeHooks("after",i,s)),s.return}}}}wire(e,r=null,t=!1){if("Object"!==e.constructor.name&&(r=e.constructor.name),!r)throw new Error("Please provide a name: ProcessWire.wire(object, name)");return"Object"===e.constructor.name&&(t=!0),t?this.wireNoProxy(e,r):this.wireProxy(e,r)}wireNoProxy(r,t){const o=this;let n=Object.getOwnPropertyDescriptors(r);for(let r in n){if(!r.startsWith("___"))continue;const s=n[r].value;if("function"!=typeof s)continue;let i=r.slice(3);const c=`${t}::${i}`;n[i]={value:function(...r){const t=new e({arguments:r,object:this});return o.executeHooks("before",c,t),t.replace||(t.return=s.apply(this,t.arguments()),o.executeHooks("after",c,t)),t.return}}}return Object.create(Object.getPrototypeOf(r),n)}wireProxy(e,r){return new Proxy({object:e,name:r},this.hookHandler())}};ProcessWire.wire=r.wire.bind(r),ProcessWire.addHookAfter=r.addHookAfter.bind(r),ProcessWire.addHookBefore=r.addHookBefore.bind(r);
